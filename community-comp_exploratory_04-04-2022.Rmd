---
title: "community-comp_exploratory_04-04-2022"
author: "Tim Ohlert"
date: "4/4/2022"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


##load packages
```{r}
library(tidyverse)
library(plyr)
library(codyn)




```


##load data
```{r}
full_cover <- read.csv("C:/Users/ohler/Dropbox/IDE/data_processed/full_cover_04-04-2022.csv")
```


```{r}
summary(full_cover)
```

```{r}
summary(full_cover$max_cover)

```



```{r}
hist(full_cover$max_cover)
```

```{r}
unique(full_cover$trt)
unique(full_cover$functional_group)
unique(full_cover$live)
unique(full_cover$ps_path)
unique(full_cover$local_lifespan)


```


```{r}
grass <- subset(full_cover, functional_group == "GRASS")
summary(grass)
graminoid <- subset(full_cover, functional_group == "GRAMINOID")
summary(graminoid)
null <- subset(full_cover, functional_group == "NULL")
summary(null)
```




Make some plot level aggregate values
-species richness
-evenness
-percent grass
-percent forb
```{r}
full_cover$functional_group <- ifelse(full_cover$functional_group == "GRASS", "GRAMINOID", full_cover$functional_group)


comb.by.plot <- full_cover%>%
  subset(live == 1)%>%
  subset(trt == "Control" | trt == "Drought")%>%
  ddply(.(site_code, block, plot, subplot, year, first_treatment_year, first_treatment_date, cover_date, n_treat_days, n_treat_years, trt),
        function(x)data.frame(
          species_richness = length(x$Taxon),
          cover = sum(x$max_cover)#,
        #EQ = community_structure(
        #  x,
        #  time.var = NULL,
        #  abundance.var = "cover",
        #  replicate.var = NULL,
        #  metric = c("EQ"))$EQ
          
          
        ))
```


```{r}
length(unique(full_cover$Taxon))
```

